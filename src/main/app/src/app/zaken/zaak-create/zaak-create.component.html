<!--
  ~ SPDX-FileCopyrightText: 2021 Atos
  ~ SPDX-License-Identifier: EUPL-1.2+
  -->
<mat-sidenav-container autosize>
  <mat-sidenav
    #actionsSideNav
    mode="over"
    position="end"
    [ngSwitch]="activeSideAction"
  >
    <zac-klant-koppel
      *ngSwitchCase="'actie.initiator.toevoegen'"
      (klantGegevens)="initiatorGeselecteerd($event.klant)"
      [sideNav]="actionsSidenav"
      [initiator]="true"
      [allowBedrijf]="true"
      [allowPersoon]="true"
    ></zac-klant-koppel>
    <zac-bag-zoek
      *ngSwitchCase="'actie.bagObject.toevoegen'"
      [gekoppeldeBagObjecten]="bagObjecten"
      [sideNav]="actionsSidenav"
      (bagObject)="bagGeselecteerd()"
    ></zac-bag-zoek>
  </mat-sidenav>
  <form [formGroup]="form" (ngSubmit)="formSubmit(form)" class="flex">
    <fieldset class="flex-col gap-12">
      <label><h1>Create case</h1></label>
      <section class="flex-row gap-12">
        <zac-auto-complete
          class="flex-1"
          [key]="'zaaktype'"
          [form]="form"
          [options]="zaaktypes"
          [optionLabel]="'omschrijving'"
        >
          <mat-hint>{{
            "zaps.step.algemeen.zaaktype.hint" | translate
          }}</mat-hint>
        </zac-auto-complete>
        <zac-input
          [key]="'initiator'"
          [form]="form"
          readonly
          class="flex-1"
          (click)="openSideNav('actie.initiator.toevoegen')()"
        >
          <button mat-icon-button matSuffix type="button"><mat-icon >person</mat-icon></button>
        </zac-input>
      </section>
      <section class="flex-row gap-12">
        <zac-date
          class="flex-1"
          [key]="'startdatum'"
          [form]="form"
          [min]="minDate"
          [max]="maxDate"
        >
        </zac-date>
        <zac-input
          [key]="'bagObjecten'"
          [form]="form"
          readonly
          class="flex-1"
          (click)="openSideNav('actie.bagObject.toevoegen')()"
        >
          <button mat-icon-button matSuffix>
            <mat-icon>gps_fixed</mat-icon>
          </button>
        </zac-input>
      </section>
    </fieldset>
    <fieldset class="flex-col gap-12">
      <label><h2>Case assignment</h2></label>
      <zac-auto-complete
        class="flex-1"
        [key]="'groep'"
        [form]="form"
        [options]="groups"
        [optionLabel]="'naam'"
      >
        <mat-label>{{ "actie.zaak.toekennen.groep" | translate }}</mat-label>
      </zac-auto-complete>
      <zac-auto-complete
        class="flex-1"
        [key]="'medewerker'"
        [form]="form"
        [options]="users"
        [optionLabel]="'naam'"
      >
        <mat-label>{{
          "actie.zaak.toekennen.medewerker" | translate
        }}</mat-label>
      </zac-auto-complete>
    </fieldset>
    <fieldset class="flex-col gap-12">
      <label><h2>Other information</h2></label>
      <section class="flex-row gap-12">
        <zac-auto-complete
          class="flex-1"
          [key]="'communicatiekanaal'"
          [form]="form"
          [options]="comminucationChannels"
        >
        </zac-auto-complete>
        <zac-auto-complete
          class="flex-1"
          [key]="'vertrouwelijkheidaanduiding'"
          [form]="form"
          [options]="confidentialityNotices"
          [optionLabel]="'label'"
        >
        </zac-auto-complete>
      </section>
      <zac-input [key]="'description'" [form]="form" maxLength="80">
      </zac-input>
    </fieldset>
    <fieldset>
      <button
        mat-raised-button
        type="submit"
        color="primary"
        [disabled]="!form.valid"
      >
        Create
      </button>
      <button mat-raised-button>Cancel</button>
    </fieldset>
  </form>
  <div class="content" class="zaak-create-form">
    <div class="form">
      <mfb-form
        #mfbForm
        *ngIf="createZaakFields"
        (formSubmit)="onFormSubmit($event)"
        [formFields]="createZaakFields"
        [config]="formConfig"
      ></mfb-form>
    </div>
  </div>
</mat-sidenav-container>
