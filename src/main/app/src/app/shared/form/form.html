<!--
  ~ SPDX-FileCopyrightText: 2025 INFO.nl
  ~ SPDX-License-Identifier: EUPL-1.2+
-->

<form [formGroup]="form" (ngSubmit)="submitForm()">
  <fieldset>
    @for (field of fields; track field) {
      @switch (field.type) {
        @case ("plain-text") {
          <section>
            <h3 *ngIf="field.header" style="font-weight: bold">
              {{ field.header | translate }}
            </h3>
            <div [innerHTML]="field.text | translate"></div>
          </section>
        }
        @case ("input") {
          <zac-input [form]="form" [key]="field.key" [label]="field.label" />
        }
        @case ("date") {
          <zac-date [form]="form" [key]="field.key" />
        }
        @case ("select") {
          <zac-select
            [form]="form"
            [key]="field.key"
            [label]="field.label"
            [options]="field.options"
            [optionDisplayValue]="field.optionDisplayValue"
          />
        }
        @case ("textarea") {
          <zac-textarea [form]="form" [key]="field.key" [label]="field.label" />
        }
        @case ("auto-complete") {
          <zac-auto-complete
            [form]="form"
            [key]="field.key"
            [options]="field.options"
            [optionDisplayValue]="field.optionDisplayValue"
          />
        }
        @case ("documents") {
          <zac-documents
            [form]="form"
            [key]="field.key"
            [options]="field.options"
            [readonly]="field.readonly || readonly"
          />
        }
        @case ("radio") {
          <zac-radio
            [form]="form"
            [key]="field.key"
            [label]="field.label"
            [options]="field.options"
          />
        }
      }
    }
  </fieldset>
  <fieldset *ngIf="!readonly">
    <mat-action-row>
      <button
        *ngIf="!config.hideCancelButton"
        mat-raised-button
        type="reset"
        (click)="cancelForm()"
      >
        {{ config.cancelLabel ?? "actie.annuleren" | translate }}
      </button>
      <button
        *ngIf="config.hideCancelButton"
        mat-raised-button
        color="accent"
        [disabled]="form.invalid"
        type="button"
        (click)="partiallySubmitForm()"
      >
        {{ config.partialSubmitLabel ?? "actie.opslaan" | translate }}
      </button>
      <button
        mat-raised-button
        type="submit"
        color="primary"
        [disabled]="form.invalid"
      >
        {{ config.submitLabel ?? "actie.verstuur" | translate }}
      </button>
    </mat-action-row>
  </fieldset>
</form>
