<!--
  ~ SPDX-FileCopyrightText: 2025 Lifely
  ~ SPDX-License-Identifier: EUPL-1.2+
  -->

<div class="sidenav-title">
  <h3>
    <mat-icon>link</mat-icon>
    {{ "actie.informatieobject.koppelen" | translate }}
  </h3>
  <button mat-icon-button (click)="sideNav.close()">
    <mat-icon>close</mat-icon>
  </button>
</div>

<div class="form" *ngIf="infoObject">
  <p>{{ intro }}</p>
  <mfb-form-field class="flex-1" [field]="caseSearchField"></mfb-form-field>
  <button
    mat-flat-button
    color="primary"
    [disabled]="!isValid || loading"
    (click)="searchCases()"
  >
    {{ "actie.zoeken" | translate }}
  </button>
  <button mat-flat-button (click)="wissen()">
    {{ "actie.wissen" | translate }}
  </button>

  <div class="table-wrapper">
    <table mat-table [dataSource]="cases" matSort>
      <ng-container matColumnDef="documentKoppelen">
        <th *matHeaderCellDef mat-header-cell mat-sort-header>
          {{ "documentKoppelen" | translate }}
        </th>
        <td *matCellDef="let case" mat-cell>
          {{ case.documentKoppelene ? "true" : "false" }}
        </td>
      </ng-container>
      <ng-container matColumnDef="identificatie">
        <th *matHeaderCellDef mat-header-cell mat-sort-header>
          {{ "zaak.identificatie" | translate }}
        </th>
        <td *matCellDef="let case" mat-cell>
          {{ case.identificatie | empty }}
        </td>
      </ng-container>
      <ng-container matColumnDef="id">
        <th *matHeaderCellDef mat-header-cell mat-sort-header>
          {{ "id" | translate }}
        </th>
        <td *matCellDef="let case" mat-cell>
          {{ case.id | empty }}
        </td>
      </ng-container>
      <ng-container matColumnDef="omschrijving">
        <th *matHeaderCellDef mat-header-cell mat-sort-header>
          {{ "zaaktypeOmschrijving" | translate }}
        </th>
        <td *matCellDef="let case" mat-cell>
          {{ case.omschrijving | empty }}
        </td>
      </ng-container>
      <ng-container matColumnDef="type">
        <th *matHeaderCellDef mat-header-cell mat-sort-header>
          {{ "type" | translate }}
        </th>
        <td *matCellDef="let case" mat-cell>{{ case.type | empty }}</td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="caseColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: caseColumns"></tr>
    </table>
    <p *ngIf="cases.data.length == 0 && !loading">
      {{
        foutmelding ? foutmelding : ("msg.geen.gegevens.gevonden" | translate)
      }}
    </p>
    <p *ngIf="loading">{{ "msg.loading" | translate }}</p>
  </div>
</div>
